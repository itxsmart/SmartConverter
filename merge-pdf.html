<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merge PDF Files Online Free | Combine PDFs | SmartConverter</title>
    <meta name="description" content="Merge multiple PDF files into one document online for free. Combine PDFs in any order quickly and easily. No file size limits." />
    <meta name="keywords" content="merge PDF, combine PDF files, PDF merger, join PDF documents, free PDF combiner" />
    <meta name="author" content="SmartConverter Team" />
    <meta name="robots" content="index, follow" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="canonical" href="https://yourwebsite.com/merge-pdf.html" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <style>
        header {
            background-color: #2c3e50;
            color: white;
            padding: 15px 0;
            height: 100px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-container {
            display:  flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        
        .logo span {
            color: #3498db;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 20px;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        nav ul li a:hover {
            color: #3498db;
        }
        
        .auth-buttons a {
            margin-left: 15px;
            padding: 8px 15px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
        }
        
        .login-btn {
            color: white;
            border: 1px solid white;
        }
        
        .register-btn {
            background-color: #3498db;
            color: white;
            border: 1px solid #3498db;
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-container">
            <a href="index.html" class="logo">Smart<span>Converter</span></a>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="tools.html">Tools</a></li>
                    <!-- <li><a href="#">Pricing</a></li> -->
                    <li><a href="about.html">About Us</a></li>
                    <!-- <li><a href="#">Contact</a></li> -->
                    <li><a href="index.html">Dashboard</a></li>
                </ul>
            </nav>
            <!-- <div class="auth-buttons">
                <a href="#" class="login-btn">Sign In</a>
                <a href="#" class="register-btn">Register</a>
            </div> -->
        </div>
    </header>
    <div class="container">
        <div class="header">
            <div class="tool-icon">
                <i class="fas fa-layer-group"></i>
            </div>
            <h1>Advanced PDF Merger</h1>
            <p>Merge, reorder, and optimize your PDF files with professional-grade functionality</p>
        </div>

        <div class="main-card">
            <div class="upload-zone" id="uploadZone">
                <div class="upload-icon">
                    <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <div class="upload-text">
                    <h3>Upload PDF Files</h3>
                    <p>Drag & drop multiple PDF files here or click to browse</p>
                </div>
                <input type="file" id="fileInput" accept=".pdf" multiple style="display: none;">
            </div>

            <div class="file-list" id="fileList" style="display: none;">
                <h3>Selected Files (Drag to reorder)</h3>
                <div id="sortableList" class="sortable-list"></div>
            </div>

            <div class="options-grid">
                <div class="option-card">
                    <h3><i class="fas fa-cog"></i> Merge Options</h3>
                    <div class="option-item">
                        <input type="radio" name="mergeOrder" value="custom" id="customOrder" checked>
                        <label for="customOrder">Custom order (drag to arrange)</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="mergeOrder" value="alphabetical" id="alphabetical">
                        <label for="alphabetical">Alphabetical order</label>
                    </div>
                    <div class="option-item">
                        <input type="radio" name="mergeOrder" value="size" id="sizeOrder">
                        <label for="sizeOrder">Sort by file size</label>
                    </div>
                </div>

                <div class="option-card">
                    <h3><i class="fas fa-tools"></i> Output Options</h3>
                    <div class="option-item">
                        <input type="checkbox" name="optimize" id="optimize" checked>
                        <label for="optimize">Optimize for web</label>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" name="bookmarks" id="bookmarks" checked>
                        <label for="bookmarks">Add file bookmarks</label>
                    </div>
                    <div class="option-item">
                        <input type="checkbox" name="metadata" id="metadata">
                        <label for="metadata">Preserve metadata</label>
                    </div>
                </div>
            </div>

            <div class="progress-container" id="progressContainer">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Initializing...</div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" id="mergeBtn" disabled>
                    <i class="fas fa-magic"></i> Merge PDFs
                </button>
                <button class="btn btn-secondary" id="clearBtn">
                    <i class="fas fa-trash"></i> Clear All
                </button>
            </div>

            <div class="result-card" id="resultCard">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2>PDF Merged Successfully!</h2>
                <p id="resultInfo">Your merged PDF is ready for download</p>
                <div class="action-buttons" style="margin-top: 20px;">
                    <button class="btn btn-primary" id="downloadBtn">
                        <i class="fas fa-download"></i> Download Merged PDF
                    </button>
                    <button class="btn btn-secondary" id="newMergeBtn">
                        <i class="fas fa-plus"></i> Merge More Files
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        class PDFMerger {
            constructor() {
                this.files = [];
                this.mergedPdfBlob = null;
                this.initializeEventListeners();
            }

            initializeEventListeners() {
                const uploadZone = document.getElementById('uploadZone');
                const fileInput = document.getElementById('fileInput');
                const mergeBtn = document.getElementById('mergeBtn');
                const clearBtn = document.getElementById('clearBtn');
                const downloadBtn = document.getElementById('downloadBtn');
                const newMergeBtn = document.getElementById('newMergeBtn');

                // Upload zone events
                uploadZone.addEventListener('click', () => fileInput.click());
                uploadZone.addEventListener('dragover', this.handleDragOver.bind(this));
                uploadZone.addEventListener('dragleave', this.handleDragLeave.bind(this));
                uploadZone.addEventListener('drop', this.handleDrop.bind(this));

                // File input change
                fileInput.addEventListener('change', this.handleFileSelect.bind(this));

                // Button events
                mergeBtn.addEventListener('click', this.mergePDFs.bind(this));
                clearBtn.addEventListener('click', this.clearFiles.bind(this));
                downloadBtn.addEventListener('click', this.downloadMergedPDF.bind(this));
                newMergeBtn.addEventListener('click', this.resetTool.bind(this));

                // Sort order change
                document.querySelectorAll('input[name="mergeOrder"]').forEach(radio => {
                    radio.addEventListener('change', this.updateFileOrder.bind(this));
                });
            }

            handleDragOver(e) {
                e.preventDefault();
                document.getElementById('uploadZone').classList.add('dragover');
            }

            handleDragLeave(e) {
                e.preventDefault();
                document.getElementById('uploadZone').classList.remove('dragover');
            }

            handleDrop(e) {
                e.preventDefault();
                document.getElementById('uploadZone').classList.remove('dragover');
                const files = Array.from(e.dataTransfer.files).filter(file => file.type === 'application/pdf');
                this.addFiles(files);
            }

            handleFileSelect(e) {
                const files = Array.from(e.target.files);
                this.addFiles(files);
            }

            async addFiles(newFiles) {
                for (const file of newFiles) {
                    if (file.type === 'application/pdf') {
                        try {
                            const arrayBuffer = await file.arrayBuffer();
                            const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);
                            const pageCount = pdfDoc.getPageCount();
                            
                            this.files.push({
                                file: file,
                                name: file.name,
                                size: file.size,
                                pageCount: pageCount,
                                arrayBuffer: arrayBuffer,
                                id: Math.random().toString(36).substr(2, 9)
                            });
                        } catch (error) {
                            console.error('Error loading PDF:', file.name, error);
                            alert(`Error loading ${file.name}. Please ensure it's a valid PDF file.`);
                        }
                    }
                }
                this.updateUI();
            }

            updateUI() {
                const fileList = document.getElementById('fileList');
                const sortableList = document.getElementById('sortableList');
                const mergeBtn = document.getElementById('mergeBtn');

                if (this.files.length > 0) {
                    fileList.style.display = 'block';
                    mergeBtn.disabled = false;
                    this.renderFileList();
                } else {
                    fileList.style.display = 'none';
                    mergeBtn.disabled = true;
                }
            }

            renderFileList() {
                const sortableList = document.getElementById('sortableList');
                sortableList.innerHTML = '';

                this.files.forEach((fileData, index) => {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    fileItem.draggable = true;
                    fileItem.dataset.index = index;
                    
                    fileItem.innerHTML = `
                        <div class="file-info">
                            <div class="file-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <div class="file-details">
                                <h4>${fileData.name}</h4>
                                <p>${(fileData.size / 1024 / 1024).toFixed(2)} MB • ${fileData.pageCount} pages</p>
                            </div>
                        </div>
                        <div class="file-actions">
                            <button class="btn btn-danger" onclick="pdfMerger.removeFile(${index})">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    `;

                    // Add drag and drop functionality
                    fileItem.addEventListener('dragstart', this.handleDragStart.bind(this));
                    fileItem.addEventListener('dragover', this.handleDragOverItem.bind(this));
                    fileItem.addEventListener('drop', this.handleDropItem.bind(this));
                    
                    sortableList.appendChild(fileItem);
                });
            }

            handleDragStart(e) {
                e.dataTransfer.setData('text/plain', e.target.dataset.index);
                e.target.classList.add('dragging');
            }

            handleDragOverItem(e) {
                e.preventDefault();
            }

            handleDropItem(e) {
                e.preventDefault();
                const draggedIndex = parseInt(e.dataTransfer.getData('text/plain'));
                const targetIndex = parseInt(e.target.closest('.file-item').dataset.index);
                
                if (draggedIndex !== targetIndex) {
                    const draggedFile = this.files.splice(draggedIndex, 1)[0];
                    this.files.splice(targetIndex, 0, draggedFile);
                    this.updateUI();
                }
                
                document.querySelector('.dragging')?.classList.remove('dragging');
            }

            removeFile(index) {
                this.files.splice(index, 1);
                this.updateUI();
            }

            updateFileOrder() {
                const orderType = document.querySelector('input[name="mergeOrder"]:checked').value;
                
                switch (orderType) {
                    case 'alphabetical':
                        this.files.sort((a, b) => a.name.localeCompare(b.name));
                        break;
                    case 'size':
                        this.files.sort((a, b) => a.size - b.size);
                        break;
                    // 'custom' order doesn't need sorting
                }
                
                this.updateUI();
            }

            async mergePDFs() {
                if (this.files.length === 0) return;

                const progressContainer = document.getElementById('progressContainer');
                const progressFill = document.getElementById('progressFill');
                const progressText = document.getElementById('progressText');
                const mergeBtn = document.getElementById('mergeBtn');

                progressContainer.style.display = 'block';
                mergeBtn.disabled = true;
                progressText.textContent = 'Initializing merge process...';

                try {
                    const mergedPdf = await PDFLib.PDFDocument.create();
                    let totalPages = 0;
                    let processedPages = 0;

                    // Calculate total pages
                    totalPages = this.files.reduce((sum, file) => sum + file.pageCount, 0);

                    // Add bookmarks if enabled
                    const addBookmarks = document.getElementById('bookmarks').checked;
                    let bookmarkRefs = [];

                    for (let i = 0; i < this.files.length; i++) {
                        const fileData = this.files[i];
                        progressText.textContent = `Processing ${fileData.name}...`;
                        
                        const pdfDoc = await PDFLib.PDFDocument.load(fileData.arrayBuffer);
                        const pages = await mergedPdf.copyPages(pdfDoc, pdfDoc.getPageIndices());
                        
                        // Add bookmark for this file
                        if (addBookmarks && pages.length > 0) {
                            const bookmarkName = fileData.name.replace('.pdf', '');
                            bookmarkRefs.push({
                                name: bookmarkName,
                                pageIndex: mergedPdf.getPageCount()
                            });
                        }
                        
                        pages.forEach(page => mergedPdf.addPage(page));
                        
                        processedPages += fileData.pageCount;
                        const progress = (processedPages / totalPages) * 100;
                        progressFill.style.width = `${progress}%`;
                        
                        // Small delay to show progress
                        await new Promise(resolve => setTimeout(resolve, 100));
                    }

                    // Set metadata if enabled
                    if (document.getElementById('metadata').checked) {
                        mergedPdf.setTitle('Merged PDF Document');
                        mergedPdf.setCreator('Advanced PDF Merger');
                        mergedPdf.setCreationDate(new Date());
                    }

                    progressText.textContent = 'Finalizing PDF...';
                    progressFill.style.width = '100%';

                    // Generate the final PDF
                    const pdfBytes = await mergedPdf.save();
                    this.mergedPdfBlob = new Blob([pdfBytes], { type: 'application/pdf' });

                    // Show result
                    this.showResult(totalPages, this.mergedPdfBlob.size);

                } catch (error) {
                    console.error('Error merging PDFs:', error);
                    alert('Error merging PDFs. Please try again.');
                    progressContainer.style.display = 'none';
                    mergeBtn.disabled = false;
                }
            }

            showResult(totalPages, fileSize) {
                const resultCard = document.getElementById('resultCard');
                const resultInfo = document.getElementById('resultInfo');
                const progressContainer = document.getElementById('progressContainer');

                progressContainer.style.display = 'none';
                resultCard.style.display = 'block';
                
                const fileSizeMB = (fileSize / 1024 / 1024).toFixed(2);
                resultInfo.textContent = `${totalPages} pages merged • ${fileSizeMB} MB`;

                // Smooth scroll to result
                resultCard.scrollIntoView({ behavior: 'smooth' });
            }

            downloadMergedPDF() {
                if (!this.mergedPdfBlob) return;

                const url = URL.createObjectURL(this.mergedPdfBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `merged_document_${new Date().getTime()}.pdf`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }

            clearFiles() {
                this.files = [];
                this.mergedPdfBlob = null;
                document.getElementById('fileInput').value = '';
                this.updateUI();
            }

            resetTool() {
                this.clearFiles();
                document.getElementById('resultCard').style.display = 'none';
                document.getElementById('progressContainer').style.display = 'none';
                document.getElementById('mergeBtn').disabled = true;
            }
        }

        // Initialize the PDF Merger
        const pdfMerger = new PDFMerger();
    </script>
</body>
</html>